# ポートフォワーディングとは
暗号化されたSSH接続を利用して、ネットワークトラフィックを転送する技術。　　
ポートフォワーディングには、主に以下の3つの種類がある。

## ローカルポートフォワーディング
攻撃者がいるローカルマシン側のポートから、SSHサーバーを経由してリモートネットワーク内部の特定のサービスにアクセスするために使われる。
- 方向: クライアント（ローカル）のポート -> SSHサーバー -> ターゲットサーバー
- 目的: 攻撃者が直接アクセスできない内部ネットワークにあるサービスにアクセスするため
```bash
ssh -L <クライアントのポート>:<ターゲット内部のIP>:<ターゲット内部のポート> <ユーザー名>@<ターゲットのIP>
```

## リモートポートフォワーディング
ローカルフォワーディングとは逆方向で、外部のユーザーがSSHサーバーを経由してローカルネットワーク内のサービスにアクセスできるようにするために使われる。
- 方向: 外部のユーザー -> SSHサーバー -> クライアント（ローカル）のポート
- 目的: 内部のクライアントが、ファイアウォール越しに外部にサービスを公開するため
```bash
ssh -R <SSHサーバーで公開するポート>:<ターゲットのIP>:<ターゲットのポート> <SSH接続するユーザー名>@<SSHサーバーのIP> # ターゲット側で実行
```

## ダイナミックポートフォワーディング
特定のターゲットを指定せず、SSH接続を介してSOCKSプロキシを構築する
- 方向: クライアント（ローカル）のポート -> SSHサーバー -> 任意の（動的な）リモートサービス
- 目的: トンネルを通過するトラフィックの接続先を動的に決定できるようにし、踏み台サーバーを中間プロキシとして利用するため
```bash
ssh -D 1080 <ユーザー名>@<ターゲットのIP>
```
